[pytest]
asyncio_mode = auto
testpaths = tests

python_files = test_*.py
python_classes = Test*
python_functions = test_*

markers =
    unit: Unit tests (fast, isolated, with mocks)
    integration: Integration tests (slower, with real components)
    api: API integration tests (full HTTP stack)
    repo: Repository integration tests (requires database)
    client: Client integration tests (HTTP client tests with respx)
    slow: Tests that take significant time to run (>1s)
    fast: Tests that run quickly (<100ms)
    smoke: Smoke tests (critical path, run first)
    regression: Regression tests (prevent old bugs)
    security: Security-related tests
    auth: Authentication/authorization tests
    2fa: Two-factor authentication tests
    password: Password-related tests

addopts =
    -ra
    --strict-markers
    --strict-config
    --showlocals
    -v
    --tb=short

minversion = 8.0

filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    error::ResourceWarning

console_output_style = progress

log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S
